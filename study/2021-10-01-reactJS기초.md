---
layout: page
title: "React JS 기초"
author: author1
comments: true
description: >
hide_description: true
sitemap: true
---

0. this unordered seed list will be replaced by toc as unordered list 
{:toc}

# React JS
- 페이스북이 만들었음
- React Native는 React JS 기반 
- React & React Dom

=> https://unpkg.com/react@17.0.2/umd/react.production.min.js
=> https://unpkg.com/react-dom@17.0.2/umd/react-dom.production.min.js

React:  
React: Dom: React element를 HTML에 두는 역할

* render: 사용자에게 보여준다.

## vanilla JS와 React JS 비교

### JSX

- JS를 확장한 문법 
- HTML과 비슷함

JSX를 이해시키기 위해 babel 사용

``` <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>``` 추가

``` <script type="text/babel"> ``` 로 변경 


※ 컴포넌트의 첫 글자는 대문자여야 한다.
    -> 소문자면 JSX는 HTML 태그라고 인식함

### JS JSX 문법 차이

JS    | JSX
class | className
for   | htmlFor

### counter 함수 구성

### React의 장점
rendering 할 때 바뀐 부분만 refresh 해준다.

```
<script type="text/babel">
        const root = document.getElementById("root");
        let counter = 0;
        const countUp = () => {
            counter += 1;
            render();
        }
        const render = () => {
            ReactDOM.render(<Container />, root);
        }
        const Container = () => (
            <div>
                <h3>Total Clicks: {counter}</h3>
                <button onClick={countUp}>Click Me</button>
            </div>
        );
        render();
    </script>
```
데이터가 바뀔 때마다 컴포넌트를 리렌더링하고 UI를 Refresh 한다.

렌더링을 반복해서 사용해줘야하는 단점

### State
`useState`

`data = React.useState();`

`data[0]` => 데이터
`data[1]` => 데이터를 변경해줄 함수


```
setCounter((current) => current + 1);
``` 
혹여나 값이 바뀔 때를 대비하여 위와 같은 방법이 더 나은 방법이다.

#### 예제1. Time Converter

```
<!-- <script type="text/babel">
        function App() {
            const [index, setIndex] = React.useState("xx");
            const onSelect = (event) => {
            setIndex(event.target.value);
            }
            const [] = React.useState("Save Changes")
            return (
                <div>
                    <h1>Amazing Converter</h1>
                    <select value={index} onChange={onSelect}>
                         <option value="xx">Select Your Unit</option>
                         <option value="0">Minutes & Hours</option>
                         <option value="1">Km & Miles</option>
                     </select>
                     <hr />
                     {index === "xx" ? "Please Select Your Unit" : null}
                     {index === "0" ? <MinutesToHours /> : null}
                     {index === "1" ? <KmToMiles /> : null}
                </div >
            );
        }
        function MinutesToHours() {
            const [time, setTime] = React.useState(0);
            const [flipped, setFlipped] = React.useState(false);
            const onChange = (event) => {
                setTime(event.target.value);
            };
            const reset = () => {
                setTime(0);
            }
            const onFlip = () => {
                reset();
                setFlipped((current) => !current);
            }
            return (
                <div>
                    <h2 className="title__time">Time Converter</h2>
                    <div>
                        <label htmlFor="minutes">Minutes</label>
                        <input
                            value={flipped ? Math.round(time * 60) : time}
                            id="minutes"
                            placeholder="Minutes"
                            type="number"
                            onChange={onChange}
                            disabled={flipped === true} />
                    </div>
                    <div>
                        <label htmlFor="hours">Hours</label>
                        <input
                            value={flipped ? time : Math.round(time / 60)}
                            id="hours" placeholder="Hours"
                            type="number"
                            onChange={onChange}
                            disabled={flipped === false} />
                    </div>
                    <button onClick={reset}>Reset</button>
                    <button onClick={onFlip}>Invert</button>
                </div >
            );
        }
        function KmToMiles() {
            const [distance, setDistance] = React.useState(0);
            const [invert, setInvert] = React.useState(false);
            const onChange = (event) => {
                setDistance(event.target.value);
            }
            const reset = () => setDistance(0);
            const onInvert = () => {
                reset();
                setInvert((current) => !current)
            }
            return (
                <div>
                    <h2>Km to Mile</h2>
                    <div>
                        <label htmlFor="km"> KM </label>
                        <input value={invert ? Math.round(distance * 1.609) : distance} id="km" placeholder="Km" type="number" onChange={onChange} disabled={invert === true} />
                    </div>
                    <div>
                        <label htmlFor="mile"> MILE </label>
                        <input value={invert ? distance : Math.round(distance / 1.609)} id="mile" placeholder="Mile" type="number" onChange={onChange} disabled={invert === false} />
                    </div>
                    <button onClick={reset}>Reset</button>
                    <button onClick={onInvert}>Invert</button>
                </div>
            )
        }

        const root = document.getElementById("root");
        ReactDOM.render(<App />, root);
    </script> -->
```

### memo
```
<!-- <script type="text/babel">
        function Btn({ hello, changeValue }) {
            return (
                <button
                    onClick={changeValue}
                    style={{
                        backgroundColor: "green",
                        color: "white",
                        padding: "10px 20px",
                        border: "solid 1px",
                        borderRadius: 10,
                        fontSize: "16px",

                    }}> {hello}
                </button >
            )
        }
        function ConfirmBtn() {
            return <button>Confirm</button>
        }
        const MemorizedBtn = React.memo(Btn);
        function App() {
            const [value, setValue] = React.useState("Save Changes")
            const changeValue = () => setValue("Revert Changes");
            return (
                <div>
                    <MemorizedBtn hello={value} changeValue={changeValue} />
                    <MemorizedBtn hello="Continue" />
                </div>

            );
        }

        const root = document.getElementById("root");
        ReactDOM.render(<App />, root);
    </script> -->
```

```
<Btn hello={value} changeValue={changeValue} />
<Btn hello="Continue" />
```
memo 적용
```
const MemorizedBtn = React.memo(Btn);
<MemorizedBtn hello={value} changeValue={changeValue} />
<MemorizedBtn hello="Continue" />
```
props가 바뀌지 않는다면 re-render 하지 않는다.

### propTypes
`<script src="https://unpkg.com/prop-types@15.7.2/prop-types.js"></script>`

```
<!-- <script type="text/babel">
        function Btn({ hello, world, fontSize = 18 }) {
            return (
                <button
                    onClick={world}
                    style={{
                        backgroundColor: "green",
                        color: "white",
                        padding: "10px 20px",
                        border: "solid 1px",
                        borderRadius: 10,
                        fontSize,

                    }}> {hello}
                </button >
            )
        }
        function ConfirmBtn() {
            return <button>Confirm</button>
        }

        Btn.propTypes = {
            hello: PropTypes.string.isRequired,
            fontSize: PropTypes.number,
        }
        function App() {
            const [value, setValue] = React.useState("Save Changes")
            const changeValue = () => setValue("Revert Changes");
            return (
                <div>
                    <Btn hello={value} world={changeValue} fontSize={30} />
                    <Btn hello="Continue" />
                </div>

            );
        } -->
```
## Create React App

react-app 만들기
`npx create-react-app [생성할 폴더명]`

실행
`npm satrt`

`npm install prop-types`

-------------------------
useEffect

```
useEffect(() => {
    console.log("Call the API...");
  }, []);
  useEffect(() => {
    console.log("Search for", keyword);
  }, [keyword]);
```

### cleanup
메모리 누수를 방지하기 위해 사용

```
function Hello() {
    useEffect(()=> {
        console.log("created :)");
        return () => console.log("destroyed :(");
    }, []);
    return <h1>Hello</h1>
}
```

간단하게 쓰기
```
  useEffect(function () {
    console.log("hi :)");
    return function () {
      console.log("bye :)");
    };
  }, []);

  useEffect(() => {
    console.log("hi :)");
    return () => console.log("bye :(");
  }, []);
```

### map

예제3. To Do List
```
function App() {
  const [toDo, setToDo] = useState("");
  const [toDos, setToDos] = useState([]);
  const onChange = (event) => setToDo(event.target.value);
  const onSubmit = (event) => {
    event.preventDefault();
    if (toDo === "") {
      return;
    }
    setToDos((currentArray) => [toDo, ...currentArray]);
    setToDo("");
  };
  console.log(toDos);
  console.log(toDos.map((item, index) => <li key={index}>{item}</li>));
  return (
    <div>
      <h1>To Do List ({toDos.length})</h1>
      <form onSubmit={onSubmit}>
        <input onChange={onChange} value={toDo} type="text" placeholder="Write your to do..." />
        <button>Add To Do</button>
      </form>
      <hr />
      <ul>
        {toDos.reverse().map((item, index) => (
          <li key={index}>{item}</li>
        ))}
      </ul>
    </div>
  );
}
```

### 예제4. Coin List

```
function App() {
  const [loading, setLoading] = useState(true);
  const [coins, setCoins] = useState([]);
  const [selectPrice, setSelectPrice] = useState(0);
  const [usd, setUsd] = useState(0);

  const onChange = (event) => setUsd(event.target.value);
  const onChangeSelect = (event) => {
    setSelectPrice(event.target.value);
  };

  const reset = () => {
    setUsd(0);
  };

  useEffect(() => {
    fetch("https://api.coinpaprika.com/v1/tickers")
      .then((response) => response.json())
      .then((json) => {
        setCoins(json);
        setLoading(false);
      });
  }, []);
  return (
    <div>
      <h1>Coin List {loading ? "" : `(${coins.length})`}</h1>
      {loading ? (
        <strong>Loading...</strong>
      ) : (
        <select onChange={onChangeSelect} style={{ fontSize: "20px" }}>
          {coins.map((coin, index) => (
            <option value={coin.quotes.USD.price} key={coin.id}>
              {coin.name} ({coin.symbol}) : $ {coin.quotes.USD.price.toFixed(5)} USD
            </option>
          ))}
        </select>
      )}
      <hr />
      <form>
        <div>
          <label htmlFor="usd" style={{ fontSize: "25px" }}>
            ${" "}
          </label>
          <input value={usd} type="number" placeholder="Write Your Dollar..." style={{ fontSize: "20px" }} onChange={onChange} />
        </div>
        <div>
          <span style={{ fontSize: "20px" }}>₿ </span>
          <input value={(usd / selectPrice).toFixed(5)} type="number" placeholder="Write Your BTC..." style={{ fontSize: "20px" }} disabled />
        </div>
        <button style={{ fontSize: "20px" }}>calculate</button>
        <button onClick={reset} style={{ fontSize: "20px" }}>
          reset
        </button>
      </form>
    </div>
  );
}
```

## Movie


then
```JS

useEffect(() => {
    fetch(`
    https://yts.mx/api/v2/list_movies.json?minimum_rating=8.8&sort_by=year
    `)
      .then((response) => response.json())
      .then((json) => {
        setMovies(json.data.movies);
        setLoading(false);
      });
  }, []);
```
async await
```JS

const getMovies = async () => {
    const json = await (
      await fetch(`
    https://yts.mx/api/v2/list_movies.json?minimum_rating=8.8&sort_by=year
    `)
    ).json();
    setMovies(json.data.movies);
    setLoading(false);
  };
  useEffect(() => {
    getMovies();
  }, []);
```

## React Router

<a target="_blank" href="https://v5.reactrouter.com/web/guides/quick-start">React Router 살펴보기</a>

React Router 설치
`npm install react-router-dom`

import
`import { BrowserRouter as Router, Switch, Route } from "react-router-dom";`

BrowserRouter과 HashRouter는 URL 생김새에 차이가 있다.

## Link
href와 달리 페이지가 새로고침되지 않는다.

※※ async는 function안에 없으면 사용할 수 없다.

<hr>

## breaking change

버전 업데이트 후 코드 에러

<hr>
<a target="_blank" href="https://nomadcoders.co/?gclid=CjwKCAjw2f-VBhAsEiwAO4lNeGxUb10hQEsnXWufl6NE_TMbZVomtR59HvzfaaYKAIONyRIsWAW8QxoCRK0QAvD_BwE">Nomad Coders</a>