---
layout: page
title: "TypeScript 기초"
author: author1
comments: true
description: >
hide_description: true
sitemap: true
---

0. this unordered seed list will be replaced by toc as unordered list 
{:toc}

# TypeScript 기초
- JavaScript를 기반으로 한 프로그래밍 언어
<hr>

## JS와 TS의 차이
JS
```js
const plus = (a, b) => a + b;
```
TS
```ts
const plus = (a:number, b:number) => a + b;
```
- Type을 지정해야 한다.

- 문제가 없으면 JS 코드로 return한다.

- 잘못된 props를 보내게 된다면 오류를 보내준다.

💡Prop Types는 prop이 있는지 없는지 코드를 실행 후 확인해준다.
<hr>

## TS로 React App 생성 및 살펴보기
🔧 `npx create-react-app [프로젝트 명] --template typescript`<br>
🔧 `npm i --save-dev @types/styled-components`<br>
🔧 `npm install --save styled-components`<br>

### Interface
- object의 shape를 설명해준다.

> /src/Circle.tsx
```ts
interface ContainerProps {
  bgColor: string;
  borderColor: string;
}

const Container = styled.div<ContainerProps>`
  width: 100px;
  height: 100px;
  background-color: ${(props) => props.bgColor};
  border-radius: 100px;
  border: 5px solid ${(props) => props.borderColor};
`;

interface CircleProps {
  bgColor: string;
  borderColor?: string;
}

function Circle({ bgColor, borderColor }: CircleProps) {
  return <Container bgColor={bgColor} borderColor={borderColor ?? bgColor} />;
}

export default Circle;
```

💡 'borderColor?'는 borderColor를 사용할 수도 있고 안할 수도 있다는 의미이다. 
💡 'borderColor ?? bgColor'는 borderColor가 있다면 사용하고 없다면 bgColor를 사용하라는 의미를 갖는다.

#### State
React JS에서 사용하는 state와 기능은 동일하지만 TS에서는 default값에 따라 type이 설정된다.<br>
만약 number 또는 string 타입이 되기를 원한다면 아래와 같이 사용해야한다.
```js
const [value, setValue] = useState<number|string>(1);
setValue(3);
setValue("helloworld");
```
<hr>

### Form
> Log In Form 예시
```ts
function App() {
  const [value, setValue] = useState("");
  const onChange = (event: React.FormEvent<HTMLInputElement>) => {
    const {
      currentTarget: { value },
    } = event;
    setValue(value);
  };
  const onSubmit = (event: React.FormEvent<HTMLFormElement>) => {
    event.preventDefault();
    console.log("hello", value);
  };
  return (
    <div>
      <form onSubmit={onSubmit}>
        <input value={value} onChange={onChange} type="text" placeholder="username" />
        <button>Log in</button>
      </form>
    </div>
  );
}
```
💡 'event: React.FormEvent': Form에서 발생되는 이벤트를 받아온다.<br>
💡 '<HTMLFormElement>`: Form이 이벤트를 발생한다고 알려주고 오타가 날 경우 알려준다.<br>

[다른 이벤트 살펴보기]("https://reactjs.org/docs/events.html"){:target="_blank"}
<hr>

**📕 ES6 문법**<br>

```js
const value = event.currentTarget.value;
const id = event.currentTarget.id;
const tagName = event.currentTarget.tagName;
const width = event.currentTarget.width;
```
위의 코드를 아래와 같이 묶어서 편리하게 사용할 수 있다.
```js
const {
currentTarget: { value, id, tagName, width},
} = event;
```
<hr>

### Theme
> /src/styled.d.ts 파일 생성 
💡 'styled.d.ts'에서 'd'는 declaration(선언)을 의마한다.

#### 라이트 모드 & 다크 모드 만들기
> /src/styled.d.ts
```ts
import "styled-components";

declare module "styled-components" {
  export interface DefaultTheme {
    textColor: string;
    bgColor: string;
    btnColor: string;
  }
}
```

> /src/theme.ts
```js
import { DefaultTheme } from "styled-components";

export const lightTheme: DefaultTheme = {
  bgColor: "white",
  textColor: "black",
  btnColor: "red",
};
export const darkTheme: DefaultTheme = {
  bgColor: "black",
  textColor: "white",
  btnColor: "blue",
};
```

> `/src/index.tsx`
```js
root.render(
  <React.StrictMode>
    <ThemeProvider theme={darkTheme}>
      <App />
    </ThemeProvider>
  </React.StrictMode>
);
```

> `/src/App.tsx`
```js
const Container = styled.div`
  background-color: ${(props) => props.theme.bgColor};
`;
const H1 = styled.h1`
  color: ${(props) => props.theme.textColor};
`;

function App() {
  return (
    <Container>
      <H1>Hello World!</H1>
    </Container>
  );
}
```
<hr>

## React Query
- 편리한 방식으로 데이터를 fetch 시킨다.

react-router-dom 설치
🔧 `npm i react-router-dom@5.3.0 react-query`

import 오류 해결하기
🔧 `npm i --save-dev @types/react-router-dom`

### Router

`/src/routes/Coin.tsx`
```ts
interface RouteParams {
  coinId: string;
}

function Coin() {
  const { coinId } = useParams<RouteParams>();

  return <h1>Coin: {coinId}</h1>;
```

`/src/Router.tsx`
```ts
import { BrowserRouter, Route, Switch } from "react-router-dom";
import Coin from "./routes/Coin";
import Coins from "./routes/Coins";

function Router() {
  return (
    <BrowserRouter>
      <Switch>
        <Route path="/:coinId">
          <Coin />
        </Route>
        <Route path="/">
          <Coins />
        </Route>
      </Switch>
    </BrowserRouter>
  );
}
export default Router;
```

`/src/App.tsx`
```ts
import Router from "./Router";

function App() {
  return <Router />;
}

export default App;
```

## Hook

### useEffect
### useState
### useQuery
- React Query를 이용하여 서버로부터 데이터를 조회해 올 때 사용한다.

### useMatch(useRouteMatch)
### useNavigate(useHistory)
### useScroll(useViewScroll)

## React Query 

🔧 npm install @tanstack/react-query
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";

const client = new QueryClient();

### 
### 